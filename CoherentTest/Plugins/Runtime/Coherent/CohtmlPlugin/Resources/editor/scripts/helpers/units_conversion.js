"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var function_helpers_1=require("lib/function_helpers");exports.default={getPixelsWidgetGeometry:function(e,t,n){var r=function_helpers_1.default.getUnitStyle(n),i=0,o=parseFloat(n);return i="px"===r?o:parseFloat(this.convertUnitsToPixel(e,n,t)),{originalUnit:r,pixels:i}},convertPixelToUnit:function(e,t,n,r){var i;switch(i="fontSize"!==r||isNaN(t)?"auto"!==t?parseFloat(t):0:function_helpers_1.default.getSceneFontSize(),n){case"vw":return this.convertPixelToVw(i)+n;case"vh":return this.convertPixelToVh(i)+n;case"vmin":return this.convertPixelToVmin(i)+n;case"vmax":return this.convertPixelToVmax(i)+n;case"pt":return this.convertPixelToPt(i)+n;case"rem":return this.convertPixelToRem(i)+n;case"%":return this.pixelToPercentHandling(e,i,r)+n;case"auto":return n;default:return i+"px"}},convertUnitsToPixel:function(e,t,n){void 0===n&&(n=null);var r,i=function_helpers_1.default.getUnitStyle(t);if("fontSize"===n&&"auto"===t)return"16px";switch(r=parseFloat(t),i){case"vw":return this.convertVwToPixel(r)+"px";case"vh":return this.convertVhToPixel(r)+"px";case"vmin":return this.convertVminToPixel(r)+"px";case"vmax":return this.convertVmaxToPixel(r)+"px";case"pt":return this.convertPtToPixel(r)+"px";case"rem":return this.convertRemToPixel(r)+"px";case"%":return this.percentToPixelHandling(e,r,n)+"px";case"auto":return i;default:return r+"px"}},percentToPixelHandling:function(e,t,n){var r,i=document.getElementById(e);if("top"===n||"height"===n)r=parseFloat(this.convertUnitsToPixel(i.parentElement.id,i.parentElement.style.height,n));else if("left"===n||"width"===n)r=parseFloat(this.convertUnitsToPixel(i.parentElement.id,i.parentElement.style.width,n));else if("backgroundPositionX"===n||"-webkit-mask-position-x"===n||"backgroundSizeWidth"===n||"transform-origin-x"===n||"perspective-origin-x"===n||"translateX"===n||"-webkit-mask-sizeWidth"===n){var o=i.style.width;"%"===(a=function_helpers_1.default.getUnitStyle(o))&&(o=this.convertUnitsToPixel(i.id,i.style.width,"width")),r=parseFloat(o)}else if("backgroundPositionY"===n||"-webkit-mask-position-y"===n||"backgroundSizeHeight"===n||"transform-origin-y"===n||"perspective-origin-y"===n||"translateY"===n||"-webkit-mask-sizeHeight"===n){var l=i.style.height,a=function_helpers_1.default.getUnitStyle(l);"%"===a&&(l=this.convertUnitsToPixel(i.id,i.style.height,"height")),r=parseFloat(l)}return this.convertPercentToPixel(t,r)},pixelToPercentHandling:function(e,t,n){var r,i=document.getElementById(e),o=function_helpers_1.default.getAbsolutePosition(i,i.parentElement.id);if("top"===n)return r=parseFloat(getComputedStyle(i.parentElement,null).getPropertyValue("height")),this.convertPixelToPercent(o.top,r);if("left"===n)return r=parseFloat(getComputedStyle(i.parentElement,null).getPropertyValue("width")),this.convertPixelToPercent(o.left,r);if("width"===n){var l=parseFloat(getComputedStyle(i.parentElement,null).getPropertyValue("width")),a=getComputedStyle(i,null).getPropertyValue("width");return"%"===function_helpers_1.default.getUnitStyle(a)&&(a=this.convertPercentToPixel(parseFloat(a),l)),this.convertPixelToPercent(parseFloat(a),l)}if("height"===n){var s=parseFloat(getComputedStyle(i.parentElement,null).getPropertyValue("height")),u=getComputedStyle(i,null).getPropertyValue("height");return"%"===function_helpers_1.default.getUnitStyle(u)&&(u=this.convertPercentToPixel(parseFloat(u),s)),this.convertPixelToPercent(parseFloat(u),s)}if("backgroundSizeWidth"===n||"backgroundPositionX"===n||"transform-origin-x"===n||"perspective-origin-x"===n||"translateX"===n||"-webkit-mask-sizeWidth"===n){var c=getComputedStyle(i,null).getPropertyValue("width");return this.convertPixelToPercent(t,parseFloat(c))}if("backgroundSizeHeight"===n||"backgroundPositionY"===n||"transform-origin-y"===n||"perspective-origin-y"===n||"translateY"===n||"-webkit-mask-sizeHeight"===n){var h=getComputedStyle(i,null).getPropertyValue("height");return this.convertPixelToPercent(t,parseFloat(h))}},convertVwToPixel:function(e){var t=function_helpers_1.default.getSceneSize();return parseFloat(e)*t.width/100},convertVhToPixel:function(e){var t=function_helpers_1.default.getSceneSize();return parseFloat(e)*t.height/100},convertVmaxToPixel:function(e){var t=function_helpers_1.default.getSceneSize(),n=t.height,r=t.width,i=n>r?n:r;return parseFloat(e)*i/100},convertVminToPixel:function(e){var t=function_helpers_1.default.getSceneSize(),n=t.height,r=t.width,i=n>r?r:n;return parseFloat(e)*i/100},convertPtToPixel:function(e){return 4*parseFloat(e)/3},convertPixelToRem:function(e){var t=function_helpers_1.default.getSceneFontSize();return parseFloat(e)/t},convertRemToPixel:function(e){var t=function_helpers_1.default.getSceneFontSize();return parseFloat(e)*t},convertPixelToVh:function(e){return 100/function_helpers_1.default.getSceneSize().height*e},convertPixelToVw:function(e){return 100/function_helpers_1.default.getSceneSize().width*e},convertPixelToVmin:function(e){var t=function_helpers_1.default.getSceneSize(),n=t.height,r=t.width;return 100/(n>r?r:n)*e},convertPixelToVmax:function(e){var t=function_helpers_1.default.getSceneSize(),n=t.height,r=t.width;return 100/(n>r?n:r)*e},convertPixelToPt:function(e){return parseFloat(e)/4*3},convertPixelToPercent:function(e,t){return parseFloat(e)/parseFloat(t)*100},convertPercentToPixel:function(e,t){return parseFloat(t)*parseFloat(e)/100},toDegrees:function(e){return parseFloat(e)*(180/Math.PI)},toRadians:function(e){return parseFloat(e)*(Math.PI/180)}};